# üìä –û–ë–™–ï–î–ò–ù–ï–ù–ò–ï –û–¢–ß–Å–¢–û–í –û–¢ –†–ê–ó–ù–´–• –ë–ö–ò

**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è**

---

## üéØ –ß–¢–û –î–û–ë–ê–í–õ–ï–ù–û

### ‚úÖ –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:

1. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ `client_id`** - –º–æ–∂–Ω–æ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç—ã –æ–¥–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
2. **–°–≤–æ–¥–Ω—ã–π –æ—Ç—á—ë—Ç** - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ç –≤—Å–µ—Ö –ë–ö–ò –≤ –æ–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç
3. **–£–º–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è —Ç–∞—Ä–∏—Ñ–∞** - –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
4. **–ù–æ–≤—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã** - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ–º

---

## üìã –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨

### **–°–¶–ï–ù–ê–†–ò–ô: –£ –∫–ª–∏–µ–Ω—Ç–∞ 4 PDF –æ—Ç —Ä–∞–∑–Ω—ã—Ö –ë–ö–ò**

#### **–®–ê–ì 1: –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤—Å–µ PDF —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º `client_id`**

```bash
# PDF 1 –æ—Ç –ù–ë–ö–ò
curl -X POST "http://localhost:8000/api/v1/process" \
  -F "file=@nbki_ivanov.pdf" \
  -F "client_id=ivanov_123" \
  -F "deal_id=45678"

# –û—Ç–≤–µ—Ç: {"task_id": "abc-111", "status": "pending", ...}

# PDF 2 –æ—Ç –û–ö–ë
curl -X POST "http://localhost:8000/api/v1/process" \
  -F "file=@okb_ivanov.pdf" \
  -F "client_id=ivanov_123" \  # ‚Üê –¢–æ—Ç –∂–µ client_id!
  -F "deal_id=45678"

# –û—Ç–≤–µ—Ç: {"task_id": "abc-222", "status": "pending", ...}

# PDF 3 –æ—Ç –≠–∫–≤–∏—Ñ–∞–∫—Å
curl -X POST "http://localhost:8000/api/v1/process" \
  -F "file=@equifax_ivanov.pdf" \
  -F "client_id=ivanov_123" \
  -F "deal_id=45678"

# PDF 4 –æ—Ç –ë–ö–ò
curl -X POST "http://localhost:8000/api/v1/process" \
  -F "file=@bki_ivanov.pdf" \
  -F "client_id=ivanov_123" \
  -F "deal_id=45678"
```

---

#### **–®–ê–ì 2: –î–æ–∂–¥–∏—Ç–µ—Å—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö PDF**

–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–≥–æ:

```bash
curl "http://localhost:8000/api/v1/status/abc-111"
curl "http://localhost:8000/api/v1/status/abc-222"
curl "http://localhost:8000/api/v1/status/abc-333"
curl "http://localhost:8000/api/v1/status/abc-444"
```

–ö–æ–≥–¥–∞ –≤—Å–µ –≤–µ—Ä–Ω—É—Ç `"status": "completed"` - –º–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å.

---

#### **–®–ê–ì 3: –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–¥–Ω—ã–π –æ—Ç—á—ë—Ç**

```bash
curl -X POST "http://localhost:8000/api/v1/merge-reports?client_id=ivanov_123"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "success",
  "merged_report_id": "merged-999",
  "client_id": "ivanov_123",
  "client_name": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á",
  "reports_merged": 4,
  "bki_types": ["–ù–ë–ö–ò", "–û–ö–ë", "–≠–∫–≤–∏—Ñ–∞–∫—Å", "–ë–ö–ò"],
  "summary": {
    "avg_credit_score": 757.5,
    "total_debt": 1850000,
    "total_active_accounts": 12,
    "max_delinquency_days": 5
  },
  "final_tariff": "Premium",
  "document_path": "output/–°–≤–æ–¥–Ω—ã–π_–û—Ç—á—ë—Ç_–ò–≤–∞–Ω–æ–≤_–ò–≤–∞–Ω_20260109_124530.docx",
  "download_url": "/download/merged-999"
}
```

---

#### **–®–ê–ì 4: –°–∫–∞—á–∞–π—Ç–µ —Å–≤–æ–¥–Ω—ã–π –æ—Ç—á—ë—Ç**

```bash
curl "http://localhost:8000/api/v1/download/merged-999" --output –°–≤–æ–¥–Ω—ã–π_–û—Ç—á—ë—Ç.docx
```

---

## üìÑ –ß–¢–û –í –°–í–û–î–ù–û–ú –û–¢–ß–Å–¢–ï

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞:**

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë   –°–í–û–î–ù–´–ô –ö–†–ï–î–ò–¢–ù–´–ô –û–¢–ß–Å–¢                 ‚ïë
‚ïë   –ö–ª–∏–µ–Ω—Ç: –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á            ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

üìä –°–í–û–î–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
‚îú‚îÄ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –ë–ö–ò: 4
‚îú‚îÄ –ò—Å—Ç–æ—á–Ω–∏–∫–∏: –ù–ë–ö–ò, –û–ö–ë, –≠–∫–≤–∏—Ñ–∞–∫—Å, –ë–ö–ò
‚îú‚îÄ –°—Ä–µ–¥–Ω–∏–π –∫—Ä–µ–¥–∏—Ç–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥: 757 –±–∞–ª–ª–æ–≤
‚îú‚îÄ –û–±—â–∞—è –¥–æ–ª–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞: 1 850 000 —Ä—É–±
‚îú‚îÄ –ê–∫—Ç–∏–≤–Ω—ã—Ö –∫—Ä–µ–¥–∏—Ç–æ–≤: 12
‚îî‚îÄ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å—Ä–æ—á–∫–∞: 5 –¥–Ω–µ–π

üìã –î–ï–¢–ê–õ–ò–ó–ê–¶–ò–Ø –ü–û –ë–ö–ò

‚ñ∏ –ù–ë–ö–ò
  ‚îú‚îÄ –†–µ–π—Ç–∏–Ω–≥: 750
  ‚îú‚îÄ –î–æ–ª–≥: 500 000
  ‚îú‚îÄ –°—á–µ—Ç–æ–≤: 3
  ‚îî‚îÄ –ü—Ä–æ—Å—Ä–æ—á–∫–∏: –ù–µ—Ç

‚ñ∏ –û–ö–ë
  ‚îú‚îÄ –†–µ–π—Ç–∏–Ω–≥: 780
  ‚îú‚îÄ –î–æ–ª–≥: 300 000
  ‚îú‚îÄ –°—á–µ—Ç–æ–≤: 2
  ‚îî‚îÄ –ü—Ä–æ—Å—Ä–æ—á–∫–∏: –ù–µ—Ç

‚ñ∏ –≠–∫–≤–∏—Ñ–∞–∫—Å
  ‚îú‚îÄ –†–µ–π—Ç–∏–Ω–≥: 760
  ‚îú‚îÄ –î–æ–ª–≥: 600 000
  ‚îú‚îÄ –°—á–µ—Ç–æ–≤: 4
  ‚îî‚îÄ –ü—Ä–æ—Å—Ä–æ—á–∫–∏: 5 –¥–Ω–µ–π

‚ñ∏ –ë–ö–ò
  ‚îú‚îÄ –†–µ–π—Ç–∏–Ω–≥: 740
  ‚îú‚îÄ –î–æ–ª–≥: 450 000
  ‚îú‚îÄ –°—á–µ—Ç–æ–≤: 3
  ‚îî‚îÄ –ü—Ä–æ—Å—Ä–æ—á–∫–∏: –ù–µ—Ç

üí≥ –í–°–ï –ö–†–ï–î–ò–¢–ù–´–ï –ü–†–û–î–£–ö–¢–´
(–¢–∞–±–ª–∏—Ü–∞ —Å–æ –≤—Å–µ–º–∏ –∫—Ä–µ–¥–∏—Ç–∞–º–∏ –æ—Ç –≤—Å–µ—Ö –ë–ö–ò)

‚úÖ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

  –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ô –¢–ê–†–ò–§: PREMIUM

–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:
–ö–ª–∏–µ–Ω—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—ã—Å–æ–∫—É—é –ø–ª–∞—Ç—ë–∂–Ω—É—é 
–¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É –∏ –º–æ–∂–µ—Ç –ø—Ä–µ—Ç–µ–Ω–¥–æ–≤–∞—Ç—å –Ω–∞ 
–Ω–∞–∏–ª—É—á—à–∏–µ —É—Å–ª–æ–≤–∏—è.

‚Ä¢ –í—ã—Å–æ–∫–∏–π —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥: 757 –±–∞–ª–ª–æ–≤
‚Ä¢ –î–∞–Ω–Ω—ã–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã 4 –ë–ö–ò
‚Ä¢ –ü—Ä–æ—Å—Ä–æ—á–∫–∏: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ (5 –¥–Ω–µ–π)
‚Ä¢ –ö–ª–∏–µ–Ω—Ç –Ω–∞–¥—ë–∂–Ω—ã–π
```

---

## üîç –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï API

### **–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –æ—Ç—á—ë—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞:**

```bash
GET /api/v1/client/{client_id}/reports
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
curl "http://localhost:8000/api/v1/client/ivanov_123/reports"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "client_id": "ivanov_123",
  "total_reports": 4,
  "reports": [
    {
      "id": "abc-111",
      "bki_type": "–ù–ë–ö–ò",
      "status": "completed",
      "upload_date": "2026-01-09T12:30:00",
      "credit_score": 750,
      "total_debt": 500000
    },
    {
      "id": "abc-222",
      "bki_type": "–û–ö–ë",
      "status": "completed",
      "upload_date": "2026-01-09T12:31:00",
      "credit_score": 780,
      "total_debt": 300000
    },
    ...
  ]
}
```

---

## ‚öôÔ∏è –õ–û–ì–ò–ö–ê –û–ü–†–ï–î–ï–õ–ï–ù–ò–Ø –¢–ê–†–ò–§–ê

### **–ö—Ä–∏—Ç–µ—Ä–∏–∏ –¥–ª—è PREMIUM:**

```
‚úÖ –°—Ä–µ–¥–Ω–∏–π –∫—Ä–µ–¥–∏—Ç–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ ‚â• 700
‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å—Ä–æ—á–∫–∞ ‚â§ 5 –¥–Ω–µ–π
‚úÖ –û–±—â–∏–π –¥–æ–ª–≥ < 2 000 000 —Ä—É–±
```

### **–ò–Ω–∞—á–µ ‚Üí OPTIMUM**

---

## üéØ –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –° –ë–ò–¢–†–ò–ö–°24

### **–°—Ü–µ–Ω–∞—Ä–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:**

1. –ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç 4 PDF –∫ —Å–¥–µ–ª–∫–µ –≤ –ë–∏—Ç—Ä–∏–∫—Å
2. –ë–∏—Ç—Ä–∏–∫—Å —á–µ—Ä–µ–∑ webhook –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã —Å `client_id`
3. CreditAI –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ PDF
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç —Å–≤–æ–¥–Ω—ã–π –æ—Ç—á—ë—Ç
5. –ó–∞–≥—Ä—É–∂–∞–µ—Ç Word –æ–±—Ä–∞—Ç–Ω–æ –≤ —Å–¥–µ–ª–∫—É
6. –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª–µ "–¢–∞—Ä–∏—Ñ: Premium"

---

## üí° –°–û–í–ï–¢–´

### **Client ID:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID: `—Ñ–∞–º–∏–ª–∏—è_–Ω–æ–º–µ—Ä` (ivanov_123)
- –ò–ª–∏ ID –∏–∑ –≤–∞—à–µ–π CRM (deal_45678_client)
- –ì–ª–∞–≤–Ω–æ–µ - –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –¥–ª—è –≤—Å–µ—Ö PDF –æ–¥–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞

### **–ü–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏:**
- –ù–µ –≤–∞–∂–µ–Ω! –ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å PDF –≤ –ª—é–±–æ–º –ø–æ—Ä—è–¥–∫–µ
- –ú–æ–∂–Ω–æ –¥–∞–∂–µ –≤ —Ä–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è
- –ì–ª–∞–≤–Ω–æ–µ - –æ–¥–∏–Ω `client_id`

### **–ú–∏–Ω–∏–º—É–º –æ—Ç—á—ë—Ç–æ–≤:**
- –î–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 2 PDF
- –ú–∞–∫—Å–∏–º—É–º - –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω
- –û–±—ã—á–Ω–æ 2-4 (–ù–ë–ö–ò, –û–ö–ë, –≠–∫–≤–∏—Ñ–∞–∫—Å, –ë–ö–ò)

---

## üÜï –ß–¢–û –ò–ó–ú–ï–ù–ò–õ–û–°–¨ –í –ë–ê–ó–ï –î–ê–ù–ù–´–•

### **–ù–æ–≤—ã–µ –ø–æ–ª—è –≤ `credit_reports`:**
```sql
client_id VARCHAR(255)  -- –î–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –æ—Ç—á—ë—Ç–æ–≤
```

### **–ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ `merged_reports`:**
```sql
id VARCHAR PRIMARY KEY
client_id VARCHAR NOT NULL
client_name VARCHAR
source_report_ids JSON  -- [abc-111, abc-222, ...]
bki_types JSON  -- [–ù–ë–ö–ò, –û–ö–ë, ...]
avg_credit_score FLOAT
total_debt FLOAT
final_recommended_tariff VARCHAR  -- Premium/Optimum
document_path TEXT
...
```

---

## ‚úÖ –ì–û–¢–û–í–û!

**–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —É–º–µ–µ—Ç:**
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç—ã –æ–¥–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
- ‚úÖ –û–±—ä–µ–¥–∏–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –æ—Ç —Ä–∞–∑–Ω—ã—Ö –ë–ö–ò
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–¥–Ω—ã–π Word –æ—Ç—á—ë—Ç
- ‚úÖ –ü—Ä–∏–Ω–∏–º–∞—Ç—å —É–º–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –æ —Ç–∞—Ä–∏—Ñ–µ
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å API –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

---

## üìû –í–û–ü–†–û–°–´?

–°–º–æ—Ç—Ä–∏—Ç–µ —Ç–∞–∫–∂–µ:
- [README.md](README.md) - –æ—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [–®–ü–ê–†–ì–ê–õ–ö–ê.md](–®–ü–ê–†–ì–ê–õ–ö–ê.md) - —á–∞—Å—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã
- [–ö–û–ú–ê–ù–î–´.md](–ö–û–ú–ê–ù–î–´.md) - –ø–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫

**–£–¥–∞—á–∏ —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º!** üöÄ


